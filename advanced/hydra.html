
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>3.4. Hydra &#8212; DaMBi HPC Guide</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=796348d33e8b1d947c94" rel="stylesheet">
<link href="../_static/styles/bootstrap.css?digest=796348d33e8b1d947c94" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=796348d33e8b1d947c94" rel="stylesheet">

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=796348d33e8b1d947c94" rel="stylesheet">
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2">
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2">
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=4ec06e9971c5264fbd345897d5258098f11cc577" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=796348d33e8b1d947c94">
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=796348d33e8b1d947c94">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=8bf782fb4ee92b3d3646425e50f299c4e1fd152d"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'advanced/hydra';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="3.5. GPU" href="gpu.html" />
    <link rel="prev" title="3.3. Experiment Managment" href="experiment.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="docsearch:language" content="en">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>

  
  <input type="checkbox" class="sidebar-toggle" name="__primary" id="__primary">
  <label class="overlay overlay-primary" for="__primary"></label>

  
  <input type="checkbox" class="sidebar-toggle" name="__secondary" id="__secondary">
  <label class="overlay overlay-secondary" for="__secondary"></label>

  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
      
<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
    </div>
  </div>

  
  <nav class="bd-header navbar navbar-expand-lg bd-navbar" id="navbar-main"><div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
      <span class="fa-solid fa-bars"></span>
  </label>
  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../index.html">

  
  
  
  
  
  
  

  
    <img src="../_static/logo.png" class="logo__image only-light" alt="Logo image">
    <img src="../_static/logo.png" class="logo__image only-dark" alt="Logo image">
  
  
</a>
    
  </div>

  
  <div class="col-lg-9 navbar-header-items">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../interactive/intro.html">
                        Interactive sessions
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../jobs/intro.html">
                        Running jobs
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="intro.html">
                        Advanced topics
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../contribute/intro.html">
                        Contribute
                      </a>
                    </li>
                
    </ul>
</nav>
      </div>
      
    </div>

    <div id="navbar-end">
      
        <div class="navbar-end-item navbar-persistent--container">
          
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
        </div>
      
      
      <div class="navbar-end-item">
        <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
</button>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
  </div>


  
  
    <div class="navbar-persistent--mobile">
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
    </div>
  

  
  <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
  </label>
  

</div>
  </nav>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        
  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../interactive/intro.html">
                        Interactive sessions
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../jobs/intro.html">
                        Running jobs
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="intro.html">
                        Advanced topics
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../contribute/intro.html">
                        Contribute
                      </a>
                    </li>
                
    </ul>
</nav>
      </div>
      
      </div>
    

    
    
    <div class="sidebar-header-items__end">
      
      <div class="navbar-end-item">
        <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
</button>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
    
  </div>

  
  <div class="sidebar-start-items sidebar-primary__section">
    <div class="sidebar-start-items__item">
  


<a class="navbar-brand logo" href="../index.html">

  
  
  
  
  
  
  

  
    <img src="../_static/logo.png" class="logo__image only-light" alt="Logo image">
    <img src="../_static/logo.png" class="logo__image only-dark" alt="Logo image">
  
  
</a>
    </div>
    <div class="sidebar-start-items__item">
<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
    </div>
    <div class="sidebar-start-items__item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../index.html">
                    Welcome to the DaMBi HPC Guide
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../interactive/intro.html">1. Interactive sessions</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../interactive/rstudio.html">1.3. RStudio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interactive/forwarding.html">1.4. Port Forwarding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interactive/vscode.html">1.5. VS Code Remote</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../jobs/intro.html">2. Running jobs</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../jobs/prerequisites.html">2.3. Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jobs/local_setup.html">2.4. Your local setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jobs/hpc_setup.html">2.5. Your HPC setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jobs/dependencies.html">2.6. Dependencies</a></li>
</ul>
</li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="intro.html">3. Advanced topics</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="frameworks.html">3.2. Frameworks</a></li>
<li class="toctree-l2"><a class="reference internal" href="experiment.html">3.3. Experiment Managment</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">3.4. Hydra</a></li>
<li class="toctree-l2"><a class="reference internal" href="gpu.html">3.5. GPU</a></li>
<li class="toctree-l2"><a class="reference internal" href="benchmarking.html">3.6. Benchmarking</a></li>
<li class="toctree-l2"><a class="reference internal" href="multinode.html">3.7. Multi-node computing</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../contribute/intro.html">4. Contribute</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../contribute/markdown.html">4.1. Markdown Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contribute/notebooks.html">4.2. Content with notebooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contribute/markdown-notebooks.html">4.3. Notebooks with MyST Markdown</a></li>
</ul>
</li>
</ul>

    </div>
</nav>
    </div>
  </div>
  

  
  <div class="sidebar-end-items sidebar-primary__section">
    <div class="sidebar-end-items__item">
    </div>
  </div>

  
  <div id="rtd-footer-container"></div>

      </div>
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

        <div class="bd-content">
          <div class="bd-article-container">
            
            <div class="bd-header-article">
                



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        <label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" data-toggle="tooltip" data-placement="right" title="Toggle primary sidebar">
            <span class="fa-solid fa-bars"></span>
        </label>
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="btn btn-sm"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<div class="dropdown dropdown-repository-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      <li><a href="https://github.com/saeyslab/dambi-hpc-guide" target="_blank"
   class="btn btn-sm dropdown-item"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">repository</span>
</a>
</a>
      
      <li><a href="https://github.com/saeyslab/dambi-hpc-guide/issues/new?title=Issue%20on%20page%20%2Fadvanced/hydra.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm dropdown-item"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">open issue</span>
</a>
</a>
      
  </ul>
</div>



<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      <li><a href="../_sources/advanced/hydra.md" target="_blank"
   class="btn btn-sm dropdown-item"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</a>
      
      <li>
<button onclick="printPdf(this)"
  class="btn btn-sm dropdown-item"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</a>
      
  </ul>
</div>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary" data-toggle="tooltip" data-placement="left" title="Toggle secondary sidebar">
            <span class="fa-solid fa-list"></span>
        </label>
    </div>
</div>
            </div>
            
            

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Hydra</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#run-a-test-job-locally">
   3.4.1. Run a test job locally
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#submitit">
   3.4.2. Submitit
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#gpu-support">
   3.4.3. GPU support
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#organize-all-experiment-configs">
   3.4.4. Organize all experiment configs
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#submit-multiple-experiments">
   3.4.5. Submit multiple experiments
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hpo">
   3.4.6. HPO
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>

            <article class="bd-article" role="main">
              
  <section class="tex2jax_ignore mathjax_ignore" id="hydra">
<h1><span class="section-number">3.4. </span>Hydra<a class="headerlink" href="#hydra" title="Permalink to this heading">#</a></h1>
<p>Hydra is a Python framework on top of OmegaConf, enabling you to configure complex application, like a data processing pipeline with lots of steps and parameters. For a complete introduction to Hydra, see <a class="reference external" href="https://hydra.cc/">the Hydra documentation</a>.</p>
<section id="run-a-test-job-locally">
<h2><span class="section-number">3.4.1. </span>Run a test job locally<a class="headerlink" href="#run-a-test-job-locally" title="Permalink to this heading">#</a></h2>
<p>Check the configuration has no errors:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">HYDRA_FULL_ERROR</span><span class="o">=</span><span class="mi">1</span> <span class="n">hydra</span> <span class="n">my_script</span><span class="o">.</span><span class="n">py</span> <span class="o">--</span><span class="n">cfg</span> <span class="n">job</span>
</pre></div>
</div>
<p>For faster debugging, we can run our code on a very small subset of the data on the interactive cluster (e.g. slaking).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ml</span> <span class="n">switch</span> <span class="n">cluster</span><span class="o">/</span><span class="n">slaking</span>
<span class="n">hydra</span> <span class="n">my_script</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>This should create output were you want it to go and helps with getting your environment setup correctly. Most likely this will fail somewhere in the pipeline, as interactive jobs on the login nodes are very limited in the number of cores they can use and memory they can allocate. This job likely gives a memory error like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ne">RuntimeError</span><span class="p">:</span> <span class="p">[</span><span class="n">enforce</span> <span class="n">fail</span> <span class="n">at</span> <span class="n">alloc_cpu</span><span class="o">.</span><span class="n">cpp</span><span class="p">:</span><span class="mi">75</span><span class="p">]</span> <span class="n">err</span> <span class="o">==</span> <span class="mf">0.</span> <span class="n">DefaultCPUAllocator</span><span class="p">:</span> <span class="n">can</span><span class="s1">&#39;t allocate memory: you tried to allocate 51380224 bytes. Error code 12 (Cannot allocate memory)</span>
</pre></div>
</div>
<p>That’s a sign we need to submit a job instead of using the login nodes.</p>
</section>
<section id="submitit">
<h2><span class="section-number">3.4.2. </span>Submitit<a class="headerlink" href="#submitit" title="Permalink to this heading">#</a></h2>
<p>You have to pass the <code class="docutils literal notranslate"><span class="pre">-m/--multirun</span></code> flag when submitting a job. For more info, see the documentation of the <a class="reference external" href="https://hydra.cc/docs/plugins/submitit_launcher/">Hydra Submitit Launcher plugin</a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">hydra</span><span class="o">-</span><span class="n">submitit</span><span class="o">-</span><span class="n">launcher</span>
</pre></div>
</div>
<p>Note that you can start jobs in the background using <code class="docutils literal notranslate"><span class="pre">{command}</span> <span class="pre">&amp;;</span> <span class="pre">disown</span></code> or use <code class="docutils literal notranslate"><span class="pre">tmux</span></code>. For a running job, you can do <code class="docutils literal notranslate"><span class="pre">Ctrl</span> <span class="pre">+</span> <span class="pre">Z;</span> <span class="pre">bg;</span></code>. You can follow all output and logs in files in the output folder. You can get a list of submitted SLURM jobs and their status using <code class="docutils literal notranslate"><span class="pre">sacct</span></code>. You can see all launcher SLURM directives using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">hydra</span> <span class="n">my_script</span><span class="o">.</span><span class="n">py</span> <span class="n">hydra</span><span class="o">/</span><span class="n">launcher</span><span class="o">=</span><span class="n">submitit_slurm</span> <span class="o">--</span><span class="n">cfg</span> <span class="n">hydra</span> <span class="o">-</span><span class="n">p</span> <span class="n">hydra</span><span class="o">.</span><span class="n">launcher</span>
</pre></div>
</div>
<p>Set the right configuration for your job. Note that here we assume <code class="docutils literal notranslate"><span class="pre">tasks_per_node=1</span></code>, so the <code class="docutils literal notranslate"><span class="pre">per_task</span></code> and <code class="docutils literal notranslate"><span class="pre">per_node</span></code> directives are the same. For launching a SLURM job with 2 CPUs and 4GB of RAM:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">hydra</span> <span class="n">my_scripy</span><span class="o">.</span><span class="n">py</span> <span class="n">hydra</span><span class="o">/</span><span class="n">launcher</span><span class="o">=</span><span class="n">submitit_slurm</span> <span class="n">hydra</span><span class="o">.</span><span class="n">launcher</span><span class="o">.</span><span class="n">cpus_per_task</span><span class="o">=</span><span class="mi">2</span> <span class="n">hydra</span><span class="o">.</span><span class="n">launcher</span><span class="o">.</span><span class="n">mem_gb</span><span class="o">=</span><span class="mi">4</span><span class="n">GB</span> <span class="o">-</span><span class="n">m</span>
</pre></div>
</div>
<p>Here we provide 2 cpus per task and reserve 4GB of RAM on the node.</p>
</section>
<section id="gpu-support">
<h2><span class="section-number">3.4.3. </span>GPU support<a class="headerlink" href="#gpu-support" title="Permalink to this heading">#</a></h2>
<p><a class="reference internal" href="gpu.html"><span class="doc std std-doc">GPU</span></a></p>
</section>
<section id="organize-all-experiment-configs">
<h2><span class="section-number">3.4.4. </span>Organize all experiment configs<a class="headerlink" href="#organize-all-experiment-configs" title="Permalink to this heading">#</a></h2>
<p>You can organize different experiments using the <a class="reference external" href="https://hydra.cc/docs/patterns/configuring_experiments/">Experiment pattern</a>.</p>
<p>You can create new datasets by adding a config .yaml to your local <code class="docutils literal notranslate"><span class="pre">configs/dataset/</span></code> folder. Extend existing configs using the defaults keyword. Make sure that the name of the new dataset is unique.</p>
<p>By creating multiple experiment configs, experiments can be cleanly defined by composing existing configs and overwriting only a few new parameters.</p>
</section>
<section id="submit-multiple-experiments">
<h2><span class="section-number">3.4.5. </span>Submit multiple experiments<a class="headerlink" href="#submit-multiple-experiments" title="Permalink to this heading">#</a></h2>
<p>Multiple experiments can be run using a comma or the <a class="reference external" href="https://hydra.cc/docs/1.1/patterns/configuring_experiments/#sweeping-over-experiments">glob syntax</a>.</p>
<p>hydra +experiment=exp1,exp2 -m</p>
</section>
<section id="hpo">
<h2><span class="section-number">3.4.6. </span>HPO<a class="headerlink" href="#hpo" title="Permalink to this heading">#</a></h2>
<p>Instead of sweeping over all parameters in a extensive grid search, you could also try to automatically and intelligently try as many parameters within a given budget of runs. This is called hyperparameter optimization (HPO). Hydra has a plugin for this called <a class="reference external" href="https://hydra.cc/docs/plugins/optuna_sweeper/">Optuna</a>. What is required is to define a search space for each parameter and an objective function. The objective function is the metric you want to optimize. The sweeper will then try to find the best combination of parameters.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./advanced"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

            </article>
            

            
            
            <footer class="bd-footer-article">
                <!-- Previous / next buttons -->
<div class='prev-next-area'>
  <a class='left-prev' id="prev-link" href="experiment.html" title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
          <p class="prev-next-subtitle">previous</p>
          <p class="prev-next-title"><span class="section-number">3.3. </span>Experiment Managment</p>
      </div>
  </a>
  <a class='right-next' id="next-link" href="gpu.html" title="next page">
  <div class="prev-next-info">
      <p class="prev-next-subtitle">next</p>
      <p class="prev-next-title"><span class="section-number">3.5. </span>GPU</p>
  </div>
  <i class="fa-solid fa-angle-right"></i>
  </a>
</div>
            </footer>
            
          </div>
          
          
          
            <div class="bd-sidebar-secondary bd-toc">
              
<div class="toc-item">
  
<div class="tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
</div>
<nav id="bd-toc-nav" class="page-toc">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#run-a-test-job-locally">
   3.4.1. Run a test job locally
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#submitit">
   3.4.2. Submitit
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#gpu-support">
   3.4.3. GPU support
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#organize-all-experiment-configs">
   3.4.4. Organize all experiment configs
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#submit-multiple-experiments">
   3.4.5. Submit multiple experiments
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hpo">
   3.4.6. HPO
  </a>
 </li>
</ul>

</nav>
</div>

            </div>
          
          
        </div>
        <footer class="bd-footer-content">
          <div class="bd-footer-content__inner">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By DaMBi
</p>

  </div>
  
  <div class="footer-item">
    
<p class="copyright">

    &copy; Copyright 2023.<br>

</p>

  </div>
  
  <div class="footer-item">
    <p class="last-updated">
Last updated on None.<br>
</p>
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </div>
        </footer>
        

      </main>
    </div>
  </div>

  
    
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=796348d33e8b1d947c94"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=796348d33e8b1d947c94"></script>

  </body>
</html>